<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BaFin Data Marketplace | Dashboard</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
</head>

<body>
    <div class="background-glow"></div>

    <!-- Added dashboard-container class to override max-width -->
    <div class="container dashboard-container">
        <header>
            <div class="user-block">
                <div class="logo">BaFin Data Marketplace</div>
                <div style="display: flex; gap: 1rem; align-items: center;">
                    <!-- Notification Bell -->
                    <div class="bell-wrapper" onclick="switchTab('inbox')">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                            <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                        </svg>
                        <div id="badgeCount" class="badge-count">0</div>
                    </div>

                    <span id="welcomeMsg" style="font-size: 0.9rem; color: var(--primary);"></span>
                    <button class="logout-btn" onclick="logout()">Logout</button>
                    <a href="index.html" class="logout-btn" style="text-decoration: none;">+ New Product</a>
                </div>
            </div>

            <div class="nav-tabs">
                <div class="nav-tab active" onclick="switchTab('myProducts')">My Data Products</div>
                <div class="nav-tab" onclick="switchTab('marketplace')">Marketplace</div>
                <div class="nav-tab" onclick="switchTab('inbox')">My Inbox (Approvals)</div>
                <div class="nav-tab" onclick="switchTab('access')">External Access</div>
            </div>
        </header>

        <!-- Tab 1: My Data Products -->
        <div id="myProducts" class="tab-content active">
            <h3 style="margin-bottom: 1rem;">Data Owned by My Domain</h3>
            <div id="myProductsGrid" class="grid">Loading...</div>
        </div>

        <!-- Tab 2: Marketplace -->
        <div id="marketplace" class="tab-content">
            <div id="catalogGrid" class="grid">Loading...</div>
        </div>

        <!-- Tab 3: Inbox -->
        <div id="inbox" class="tab-content">
            <h3 style="margin-bottom: 1rem;">Pending Requests for Review</h3>
            <div id="inboxList">Loading...</div>
        </div>

        <!-- Tab 4: My Access -->
        <div id="access" class="tab-content">
            <h3 style="margin-bottom: 1rem;">External Data I Can Access</h3>
            <div id="accessList">Loading...</div>
        </div>
    </div>

    <!-- Request Access Modal -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <h2 id="modalTitle">Request Access</h2>
            <p style="margin-bottom: 1rem; color: var(--text-muted); font-size: 0.9rem;">Submit request to the domain
                owner.</p>
            <textarea id="requestReason" placeholder="Reason..."></textarea>
            <div style="display: flex; gap: 1rem;">
                <button onclick="closeModal()"
                    style="background: transparent; border: 1px solid var(--border); color: #94a3b8;">Cancel</button>
                <button onclick="submitRequest()"
                    style="background: var(--primary); color: white; border: none;">Submit</button>
            </div>
        </div>
    </div>

    <!-- View Data Modal -->
    <div id="dataModal" class="modal">
        <div class="modal-content" style="max-width: 800px;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                <h2 id="dataModalTitle">Data Preview</h2>
                <button onclick="closeDataModal()"
                    style="width: auto; padding: 0.5rem; background: transparent; color: var(--text-muted); font-size: 1.5rem; border: none; cursor: pointer;">&times;</button>
            </div>
            <div style="overflow-x: auto;">
                <table id="dataTable"
                    style="width: 100%; border-collapse: collapse; color: var(--text-main); font-size: 0.9rem;">
                    <!-- JS will populate -->
                </table>
            </div>
        </div>
    </div>

    <script src="dashboard.js"></script>
</body>

</html>